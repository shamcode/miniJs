function jsObject(a){this.clone=function(){return function(a){var b=a instanceof Array?[]:{};for(var c in a)b[c]=typeof a[c]=="object"?arguments.callee(a[c]):a[c];return b}(a)},this.equal=function(b){return function(a,b){if(a==void 0||b==void 0)return a==b;if(a.length!=b.length)return!1;for(var c in a)if(typeof a[c]=="object"){if(!b[c]||!arguments.callee(a[c],b[c]))return!1}else if(typeof a[c]=="function"){if(a[c]+""!=b[c]+"")return!1}else if(a[c]!==b[c])return!1;return a.length==void 0&&a+""!=b+""?!1:!0}(a,b)},this.in=function(a){for(var b in a)if(this.equal(a[b]))return!0;return!1},this.alert=function(b,c){var d="";for(var e in a)d+=c?miniJs.object(e).in(b)?"":e+"="+(a[e]+"")+"\n":b?miniJs.object(e).in(b)?e+"="+(a[e]+"")+"\n":"":e+"="+(a[e]==void 0?"":a[e]+"")+"\n";alert(d)},this.set=function(b,c){for(var d in b)if(c&&a[d]!==void 0)continue;typeof b[d]=="object"?(a[d]==void 0&&(a[d]=b[d]instanceof Array?[]:{}),miniJs.object(a[d]).set(b[d])):a[d]=typeof b[d]=="function"?miniJs.function(b[d]).clone():b[d]},this.with=function(){miniJs.this=a}}function jsArray(a){this.clone=function(){return a.slice(0)},this.equal=function(b){return miJs.object(a).equal(b)},this.alert=function(){var b="";for(var c in a)b+=c+"="+(a[c]+"")+"\n";alert(b)},this.map=function(b){if(a.map!==void 0)return a.map(b);var c=[];for(var d in a)c.push(b(a[d]));return c},this.filter=function(b){if(a.filter!==void 0)return a.filter(b);var c=[];for(var d in a)b(a[d])&&c.push(a);return c},this.uniq=function(){var b=[];for(var c in a)if(!miJs.object(a[c]).in(b)){var d=0;for(var e in a)if(d+=miJs.object(a[c]).equal(a[e])?1:0,d>1){b.push(a[c]);break}d==1&&b.push(a[c])}return b},this.delete=function(a){return this.filter(function(b){return!miJs.object(b).equal(a)})}}function jsFunction(a){this.cache=function(){var b=function(){for(var c in b.base.argument)if(b.base.argument[c].hasOwnProperty(c)&&miniJs.object(b.base.argument[c]).equal(arguments))return b.base.retValue[c];b.base.argument.push(arguments);var d=a.apply(this,arguments);return b.base.retValue.push(d),d};return b.base={argument:[],retValue:[]},b},this.log=function(){var b=function(){var c=a.apply(this,arguments);b.log.push({args:arguments,ret:c})};return b.log=[],b},this.clone=function(){var b=function(){return a.apply({},arguments)};for(var d in a)b[d]=typeof a[d]=="object"?miJs.object(a[d]).clone():a[d];return b}}miJs=miniJs=new function(){this.object=function(a){return new jsObject(a)},this.function=function(a){return new jsFunction(a)},this.array=function(a){return new jsArray(a)},this.this=void 0}